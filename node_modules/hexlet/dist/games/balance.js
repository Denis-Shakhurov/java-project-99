'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _hexletPairs = require('hexlet-pairs');

var _ = require('..');

var _utils = require('../utils');

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var rule = 'Balance the given number.';

var valueRangeMin = 10;
var valueRangeMax = 20000;

var getBalancedAsString = function getBalancedAsString(num) {
  var numeralsList = String(num).split('').map(function (element) {
    return Number(element);
  });
  var length = numeralsList.length;

  var iter = function iter(numerals) {
    var acc = numerals.sort();
    var max = acc[length - 1];
    var min = acc[0];

    if (max - min > 1) {
      acc[length - 1] -= 1;
      acc[0] += 1;

      return iter(acc);
    }

    return acc.join('');
  };

  return iter(numeralsList);
};

var askBalance = function askBalance() {
  var num = (0, _utils2.default)(valueRangeMin, valueRangeMax);
  var question = '' + num;
  var answer = getBalancedAsString(num);
  var game = (0, _hexletPairs.cons)(question, answer);
  return game;
};

var startBalanceGame = function startBalanceGame() {
  return (0, _.makeGame)(askBalance, rule);
};

exports.default = startBalanceGame;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9nYW1lcy9iYWxhbmNlLmpzIl0sIm5hbWVzIjpbInJ1bGUiLCJ2YWx1ZVJhbmdlTWluIiwidmFsdWVSYW5nZU1heCIsImdldEJhbGFuY2VkQXNTdHJpbmciLCJudW0iLCJudW1lcmFsc0xpc3QiLCJTdHJpbmciLCJzcGxpdCIsIm1hcCIsIk51bWJlciIsImVsZW1lbnQiLCJsZW5ndGgiLCJpdGVyIiwibnVtZXJhbHMiLCJhY2MiLCJzb3J0IiwibWF4IiwibWluIiwiam9pbiIsImFza0JhbGFuY2UiLCJxdWVzdGlvbiIsImFuc3dlciIsImdhbWUiLCJzdGFydEJhbGFuY2VHYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7O0FBRUEsSUFBTUEsT0FBTywyQkFBYjs7QUFFQSxJQUFNQyxnQkFBZ0IsRUFBdEI7QUFDQSxJQUFNQyxnQkFBZ0IsS0FBdEI7O0FBRUEsSUFBTUMsc0JBQXNCLFNBQXRCQSxtQkFBc0IsQ0FBQ0MsR0FBRCxFQUFTO0FBQ25DLE1BQU1DLGVBQWVDLE9BQU9GLEdBQVAsRUFBWUcsS0FBWixDQUFrQixFQUFsQixFQUFzQkMsR0FBdEIsQ0FBMEI7QUFBQSxXQUFXQyxPQUFPQyxPQUFQLENBQVg7QUFBQSxHQUExQixDQUFyQjtBQUNBLE1BQU1DLFNBQVNOLGFBQWFNLE1BQTVCOztBQUVBLE1BQU1DLE9BQU8sU0FBUEEsSUFBTyxDQUFDQyxRQUFELEVBQWM7QUFDekIsUUFBTUMsTUFBTUQsU0FBU0UsSUFBVCxFQUFaO0FBQ0EsUUFBTUMsTUFBTUYsSUFBSUgsU0FBUyxDQUFiLENBQVo7QUFDQSxRQUFNTSxNQUFNSCxJQUFJLENBQUosQ0FBWjs7QUFFQSxRQUFJRSxNQUFNQyxHQUFOLEdBQVksQ0FBaEIsRUFBbUI7QUFDakJILFVBQUlILFNBQVMsQ0FBYixLQUFtQixDQUFuQjtBQUNBRyxVQUFJLENBQUosS0FBVSxDQUFWOztBQUVBLGFBQU9GLEtBQUtFLEdBQUwsQ0FBUDtBQUNEOztBQUVELFdBQU9BLElBQUlJLElBQUosQ0FBUyxFQUFULENBQVA7QUFDRCxHQWJEOztBQWVBLFNBQU9OLEtBQUtQLFlBQUwsQ0FBUDtBQUNELENBcEJEOztBQXNCQSxJQUFNYyxhQUFhLFNBQWJBLFVBQWEsR0FBTTtBQUN2QixNQUFNZixNQUFNLHFCQUFlSCxhQUFmLEVBQThCQyxhQUE5QixDQUFaO0FBQ0EsTUFBTWtCLGdCQUFjaEIsR0FBcEI7QUFDQSxNQUFNaUIsU0FBU2xCLG9CQUFvQkMsR0FBcEIsQ0FBZjtBQUNBLE1BQU1rQixPQUFPLHVCQUFLRixRQUFMLEVBQWVDLE1BQWYsQ0FBYjtBQUNBLFNBQU9DLElBQVA7QUFDRCxDQU5EOztBQVFBLElBQU1DLG1CQUFtQixTQUFuQkEsZ0JBQW1CO0FBQUEsU0FBTSxnQkFBU0osVUFBVCxFQUFxQm5CLElBQXJCLENBQU47QUFBQSxDQUF6Qjs7a0JBRWV1QixnQiIsImZpbGUiOiJiYWxhbmNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ucyB9IGZyb20gJ2hleGxldC1wYWlycyc7XG5pbXBvcnQgeyBtYWtlR2FtZSB9IGZyb20gJy4uJztcbmltcG9ydCBnZW5lcmF0ZU51bWJlciBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IHJ1bGUgPSAnQmFsYW5jZSB0aGUgZ2l2ZW4gbnVtYmVyLic7XG5cbmNvbnN0IHZhbHVlUmFuZ2VNaW4gPSAxMDtcbmNvbnN0IHZhbHVlUmFuZ2VNYXggPSAyMDAwMDtcblxuY29uc3QgZ2V0QmFsYW5jZWRBc1N0cmluZyA9IChudW0pID0+IHtcbiAgY29uc3QgbnVtZXJhbHNMaXN0ID0gU3RyaW5nKG51bSkuc3BsaXQoJycpLm1hcChlbGVtZW50ID0+IE51bWJlcihlbGVtZW50KSk7XG4gIGNvbnN0IGxlbmd0aCA9IG51bWVyYWxzTGlzdC5sZW5ndGg7XG5cbiAgY29uc3QgaXRlciA9IChudW1lcmFscykgPT4ge1xuICAgIGNvbnN0IGFjYyA9IG51bWVyYWxzLnNvcnQoKTtcbiAgICBjb25zdCBtYXggPSBhY2NbbGVuZ3RoIC0gMV07XG4gICAgY29uc3QgbWluID0gYWNjWzBdO1xuXG4gICAgaWYgKG1heCAtIG1pbiA+IDEpIHtcbiAgICAgIGFjY1tsZW5ndGggLSAxXSAtPSAxO1xuICAgICAgYWNjWzBdICs9IDE7XG5cbiAgICAgIHJldHVybiBpdGVyKGFjYyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjYy5qb2luKCcnKTtcbiAgfTtcblxuICByZXR1cm4gaXRlcihudW1lcmFsc0xpc3QpO1xufTtcblxuY29uc3QgYXNrQmFsYW5jZSA9ICgpID0+IHtcbiAgY29uc3QgbnVtID0gZ2VuZXJhdGVOdW1iZXIodmFsdWVSYW5nZU1pbiwgdmFsdWVSYW5nZU1heCk7XG4gIGNvbnN0IHF1ZXN0aW9uID0gYCR7bnVtfWA7XG4gIGNvbnN0IGFuc3dlciA9IGdldEJhbGFuY2VkQXNTdHJpbmcobnVtKTtcbiAgY29uc3QgZ2FtZSA9IGNvbnMocXVlc3Rpb24sIGFuc3dlcik7XG4gIHJldHVybiBnYW1lO1xufTtcblxuY29uc3Qgc3RhcnRCYWxhbmNlR2FtZSA9ICgpID0+IG1ha2VHYW1lKGFza0JhbGFuY2UsIHJ1bGUpO1xuXG5leHBvcnQgZGVmYXVsdCBzdGFydEJhbGFuY2VHYW1lO1xuIl19